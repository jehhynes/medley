@model Guid?

@{
    ViewData["Title"] = "Sources";
    ViewData["HasRightSidebar"] = false;
    ViewData["HasLeftSidebar"] = true;
    
    // Only open sidebar on mobile if no specific record is selected
    var openSidebarOnMobile = Model == null;
    ViewData["OpenSidebarOnMobile"] = openSidebarOnMobile;

    Layout = "_VueLayout";
}

@section Styles {
    <style>
        json-viewer {
            --background-color: transparent;
        }
  
               
        
        /* Make main content use flexbox for independent tab scrolling */
        .main-content {
            display: flex;
            flex-direction: column;
            height: 100%;
            overflow: hidden;
            padding: 0;
        }
        
        .main-content-header {
            flex-shrink: 0;
            padding: 2rem 2.5rem 0 2.5rem;
            margin-bottom: 0!important;
        }
        
        /* Tab navigation container */
        .main-content .nav-tabs {
            flex-shrink: 0;
            margin: 0 2.5rem;
            padding-top: 1rem;
        }
        
        /* Tab content container - takes remaining space and scrolls */
        .main-content .tab-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            overflow: hidden;
            min-height: 0; /* Important for flex children to respect overflow */
        }
        
        /* Each tab pane should fill available space and scroll independently */
        .main-content .tab-pane {
            height: 100%;
            overflow-y: auto;
            overflow-x: hidden;
            padding: 1.5rem 2.5rem 2rem 2.5rem;
            min-height: 0; /* Important for flex children to respect overflow */
        }
        
        /* Content preview - let it flow naturally within scrolling tab pane */
        .content-preview {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        
        /* Fragment list styles */
        .fragment-list {
            width: 100%;
        }
        
        .fragment-list .fragment-item:hover {
            background-color: var(--bs-secondary-bg);
        }
        
        /* Fragment modal styles */
        #fragmentModal {
            z-index: 1055;
        }
        
        .modal-backdrop {
            z-index: 1050;
        }
        
        #fragmentModal .markdown-container {
            max-height: 60vh;
            overflow-y: auto;
        }
        
        /* Tag filtering styles */
        .badge[style*="cursor: pointer"]:hover {
            text-decoration: underline;
        }
    </style>
}

@* Vue template has been moved to wwwroot/js/pages/sources.js *@
@* This is an intermediate step before full migration to .vue SFC *@
<div id="app"></div>

@section Scripts {
    <script src="~/lib/marked/marked.min.js" asp-append-version="true"></script>
    <script src="~/lib/bootbox/dist/bootbox.all.min.js" asp-append-version="true"></script>
    <script src="~/js/app.js" asp-append-version="true"></script>
    <script src="~/js/utils.js" asp-append-version="true"></script>
    <script src="~/js/url-utils.js" asp-append-version="true"></script>
    <script src="~/js/dist/app.js" asp-append-version="true"></script>
    <script src="~/js/pages/sources.js" asp-append-version="true"></script>
}
