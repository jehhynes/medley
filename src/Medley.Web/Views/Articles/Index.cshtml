@{
    ViewData["Title"] = "Articles";
    ViewData["HasRightSidebar"] = true;
    ViewData["HasLeftSidebar"] = true;
    Layout = "_VueLayout";
}

<!-- Left Sidebar (List/Tree) -->
<div class="sidebar left-sidebar">
    <div class="sidebar-header">
        <h6 class="sidebar-title">Articles</h6>
        @* <button class="btn btn-sm btn-primary" @@click="createNewArticle">
            <i class="bi bi-plus"></i>
        </button> *@
    </div>
    <div class="sidebar-content">
        <div v-if="loading" class="loading-spinner">
            <div class="spinner-border spinner-border-sm" role="status">
                <span class="visually-hidden">Loading...</span>
            </div>
        </div>
        <div v-else-if="error" class="alert alert-danger" v-cloak>
            {{ error }}
        </div>
        <article-tree 
            v-else
            :articles="articles"
            :selected-id="selectedArticleId"
            @@select="selectArticle"
        />
    </div>
</div>

<!-- Main Content -->
<div class="main-content" :class="{ 'd-flex flex-column': selectedArticle }" :style="selectedArticle ? 'padding: 0;' : ''">
    <div v-if="!selectedArticle" class="empty-state">
        <div class="empty-state-icon">
            <i class="bi bi-file-text"></i>
        </div>
        <div class="empty-state-title">No Article Selected</div>
        <div class="empty-state-text">Select an article from the sidebar to view its details</div>
    </div>
    <tiptap-editor v-else
                   v-model="editingContent"
                   :key="selectedArticleId"
                   class="flex-grow-1"
                   placeholder="Start writing your article content..." />
</div>

<!-- Right Sidebar -->
<div class="sidebar right-sidebar">
    <chat-panel :article-id="selectedArticleId" />
</div>

@section Scripts {
    <script src="~/js/app.js" asp-append-version="true"></script>
    <script src="~/js/utils.js" asp-append-version="true"></script>
    <script src="~/js/url-utils.js" asp-append-version="true"></script>
    <script src="~/js/components/article-tree.js" asp-append-version="true"></script>
    <script src="~/js/components/chat-panel.js" asp-append-version="true"></script>
    <script type="module" src="~/js/components/tiptap-editor.js" asp-append-version="true"></script>
    <script src="~/js/pages/articles.js" asp-append-version="true"></script>
}
